import{b as e,a as t,o as s,r,p as n,s as o,c as a,d as i,e as c,f as l,g as u,h as d}from"./chunks/internal.js";import{m as p,d as h,n as f,a as m,r as y,b as g,h as w,s as _,c as v,v as $,e as b,f as k,g as x,i as E}from"./chunks/exports.js";import*as j from"devalue";import{w as R,r as S}from"./chunks/index.js";import{parse as O,serialize as q}from"cookie";import*as T from"set-cookie-parser";const A="/_svelte_kit_assets",P=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],U=["GET","POST","HEAD"];function H(e,t){const s=[];let r;e.split(",").forEach(((e,t)=>{const r=/([^/ \t]+)\/([^; \t]+)[ \t]*(?:;[ \t]*q=([0-9.]+))?/.exec(e);if(r){const[,e,n,o="1"]=r;s.push({type:e,subtype:n,q:+o,i:t})}})),s.sort(((e,t)=>e.q!==t.q?t.q-e.q:"*"===e.subtype!=("*"===t.subtype)?"*"===e.subtype?1:-1:"*"===e.type!=("*"===t.type)?"*"===e.type?1:-1:e.i-t.i));let n=1/0;for(const o of t){const[e,t]=o.split("/"),a=s.findIndex((s=>!(s.type!==e&&"*"!==s.type||s.subtype!==t&&"*"!==s.subtype)));-1!==a&&a<n&&(r=o,n=a)}return r}function C(e){return function(e,...t){const s=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(s.toLowerCase())}(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}class N{constructor(e,t){this.status=e,this.body="string"==typeof t?{message:t}:t||{message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}}class L{constructor(e,t){this.status=e,this.location=t}}class W extends Error{constructor(e,t,s){super(s),this.status=e,this.text=t}}class z{constructor(e,t){this.status=e,this.data=t}}function D(e,t){const s=JSON.stringify(e),r=new Headers(t?.headers);return r.has("content-length")||r.set("content-length",I.encode(s).byteLength.toString()),r.has("content-type")||r.set("content-type","application/json"),new Response(s,{...t,headers:r})}const I=new TextEncoder;function J(e,t){const s=new Headers(t?.headers);if(!s.has("content-length")){const r=I.encode(e);return s.set("content-length",r.byteLength.toString()),new Response(r,{...t,headers:s})}return new Response(e,{...t,headers:s})}function G(e){return e instanceof N||e instanceof W?e.status:500}function F(e,t){return J(`${t} method not allowed`,{status:405,headers:{allow:M(e).join(", ")}})}function M(e){const t=P.filter((t=>t in e));return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function B(e,t,s){return J(e.templates.error({status:t,message:s}),{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function V(e,t,s){var r;const n=G(s=s instanceof N?s:(r=s)instanceof Error||r&&r.name&&r.message?r:new Error(JSON.stringify(r))),o=await Q(e,t,s),a=H(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||"application/json"===a?D(o,{status:n}):B(t,n,o.message)}async function Q(e,t,s){if(s instanceof N)return s.body;const r=G(s),n=function(e){return e instanceof W?e.text:"Internal Error"}(s);return await t.hooks.handleError({error:s,event:e,status:r,message:n})??{message:n}}function X(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function Y(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (data${t.path})`:""===t.path?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function Z(e){const t=[];return e.uses&&e.uses.dependencies.size>0&&t.push(`"dependencies":${JSON.stringify(Array.from(e.uses.dependencies))}`),e.uses&&e.uses.search_params.size>0&&t.push(`"search_params":${JSON.stringify(Array.from(e.uses.search_params))}`),e.uses&&e.uses.params.size>0&&t.push(`"params":${JSON.stringify(Array.from(e.uses.params))}`),e.uses?.parent&&t.push('"parent":1'),e.uses?.route&&t.push('"route":1'),e.uses?.url&&t.push('"url":1'),`"uses":{${t.join(",")}}`}function K(e){return e.filter((e=>null!=e))}function ee(e){return"application/json"===H(e.request.headers.get("accept")??"*/*",["application/json","text/html"])&&"POST"===e.request.method}function te(e){return e instanceof z?new Error('Cannot "throw fail()". Use "return fail()"'):e}function se(e){return re({type:"redirect",status:e.status,location:e.location})}function re(e,t){return D(e,t)}function ne(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://kit.svelte.dev/docs/form-actions#named-actions")}async function oe(e,t){const s=new URL(e.request.url);let r="default";for(const o of s.searchParams)if(o[0].startsWith("/")){if(r=o[0].slice(1),"default"===r)throw new Error('Cannot use reserved action name "default"');break}const n=t[r];if(!n)throw new W(404,"Not Found",`No action with name '${r}' found`);if(!C(e.request))throw new W(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return n(e)}function ae(e,t){return ie(e,j.stringify,t)}function ie(e,t,s){try{return t(e)}catch(r){const e=r;if("path"in e){let t=`Data returned from action inside ${s} is not serializable: ${e.message}`;throw""!==e.path&&(t+=` (data.${e.path})`),new Error(t)}throw e}}const ce="x-sveltekit-invalidated",le="x-sveltekit-trailing-slash";async function ue({event:e,state:t,node:s,parent:r}){if(!s?.server)return null;let n=!0;const o={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},a=p(e.url,(()=>{n&&(o.url=!0)}),(e=>{n&&o.search_params.add(e)}));t.prerendering&&h(a);return{type:"data",data:await(s.server.load?.call(null,{...e,fetch:(t,s)=>(new URL(t instanceof Request?t.url:t,e.url),e.fetch(t,s)),depends:(...t)=>{for(const s of t){const{href:t}=new URL(s,e.url);o.dependencies.add(t)}},params:new Proxy(e.params,{get:(e,t)=>(n&&o.params.add(t),e[t])}),parent:async()=>(n&&(o.parent=!0),r()),route:new Proxy(e.route,{get:(e,t)=>(n&&(o.route=!0),e[t])}),url:a,untrack(e){n=!1;try{return e()}finally{n=!0}}}))??null,uses:o,slash:s.server.trailingSlash}}async function de({event:e,fetched:t,node:s,parent:r,server_data_promise:n,state:o,resolve_opts:a,csr:i}){const c=await n;if(!s?.universal?.load)return c?.data??null;return await s.universal.load.call(null,{url:e.url,params:e.params,data:c?.data??null,route:e.route,fetch:pe(e,o,t,i,a),setHeaders:e.setHeaders,depends:()=>{},parent:r,untrack:e=>e()})??null}function pe(e,t,s,r,n){const o=async(o,a)=>{const i=o instanceof Request&&o.body?o.clone().body:null,c=o instanceof Request&&[...o.headers].length?new Headers(o.headers):a?.headers;let l=await e.fetch(o,a);const u=new URL(o instanceof Request?o.url:o,e.url),d=u.origin===e.url.origin;let p;if(d)t.prerendering&&(p={response:l,body:null},t.prerendering.dependencies.set(u.pathname,p));else{if("no-cors"===(o instanceof Request?o.mode:a?.mode??"cors"))l=new Response("",{status:l.status,statusText:l.statusText,headers:l.headers});else{const t=l.headers.get("access-control-allow-origin");if(!t||t!==e.url.origin&&"*"!==t)throw new Error(`CORS error: ${t?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}}const h=new Proxy(l,{get(t,r,n){async function l(r,n){const l=Number(t.status);if(isNaN(l))throw new Error(`response.status is not a number. value: "${t.status}" type: ${typeof t.status}`);s.push({url:d?u.href.slice(e.url.origin.length):u.href,method:e.request.method,request_body:o instanceof Request&&i?await he(i):a?.body,request_headers:c,response_body:r,response:t,is_b64:n})}if("arrayBuffer"===r)return async()=>{const e=await t.arrayBuffer();return p&&(p.body=new Uint8Array(e)),e instanceof ArrayBuffer&&await l(function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");const t=new Uint8Array(new Uint16Array([1]).buffer)[0]>0;return btoa(new TextDecoder(t?"utf-16le":"utf-16be").decode(new Uint16Array(new Uint8Array(e))))}(e),!0),e};async function h(){const e=await t.text();return e&&"string"!=typeof e||await l(e,!1),p&&(p.body=e),e}return"text"===r?h:"json"===r?async()=>JSON.parse(await h()):Reflect.get(t,r,t)}});if(r){const t=l.headers.get;l.headers.get=s=>{const r=s.toLowerCase(),o=t.call(l.headers,r);if(o&&!r.startsWith("x-sveltekit-")){if(!n.filterSerializedResponseHeaders(r,o))throw new Error(`Failed to get response header "${r}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://kit.svelte.dev/docs/hooks#server-hooks-handle (at ${e.route.id})`)}return o}}return h};return(e,t)=>{const s=o(e,t);return s.catch((()=>{})),s}}async function he(e){let t="";const s=e.getReader(),r=new TextDecoder;for(;;){const{done:e,value:n}=await s.read();if(e)break;t+=r.decode(n)}return t}function fe(...e){let t=5381;for(const s of e)if("string"==typeof s){let e=s.length;for(;e;)t=33*t^s.charCodeAt(--e)}else{if(!ArrayBuffer.isView(s))throw new TypeError("value must be a string or TypedArray");{const e=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);let r=e.length;for(;r;)t=33*t^e[--r]}}return(t>>>0).toString(36)}const me={"&":"&amp;",'"':"&quot;"},ye=new RegExp(`[${Object.keys(me).join("")}]|[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]`,"g");function ge(e){return`"${e.replace(ye,(e=>2===e.length?e:me[e]??`&#${e.charCodeAt(0)};`))}"`}const we={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},_e=new RegExp(`[${Object.keys(we).join("")}]`,"g");const ve=JSON.stringify,$e=new TextEncoder;function be(e){xe[0]||function(){function e(e){return 4294967296*(e-Math.floor(e))}let t=2;for(let s=0;s<64;t++){let r=!0;for(let e=2;e*e<=t;e++)if(t%e==0){r=!1;break}r&&(s<8&&(ke[s]=e(t**.5)),xe[s]=e(t**(1/3)),s++)}}();const t=ke.slice(0),s=function(e){const t=$e.encode(e),s=8*t.length,r=512*Math.ceil((s+65)/512),n=new Uint8Array(r/8);n.set(t),n[t.length]=128,Ee(n);const o=new Uint32Array(n.buffer);return o[o.length-2]=Math.floor(s/4294967296),o[o.length-1]=s,o}(e);for(let n=0;n<s.length;n+=16){const e=s.subarray(n,n+16);let r,o,a,i=t[0],c=t[1],l=t[2],u=t[3],d=t[4],p=t[5],h=t[6],f=t[7];for(let t=0;t<64;t++)t<16?r=e[t]:(o=e[t+1&15],a=e[t+14&15],r=e[15&t]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+e[15&t]+e[t+9&15]|0),r=r+f+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(h^d&(p^h))+xe[t],f=h,h=p,p=d,d=u+r|0,u=l,l=c,c=i,i=r+(c&l^u&(c^l))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;t[0]=t[0]+i|0,t[1]=t[1]+c|0,t[2]=t[2]+l|0,t[3]=t[3]+u|0,t[4]=t[4]+d|0,t[5]=t[5]+p|0,t[6]=t[6]+h|0,t[7]=t[7]+f|0}const r=new Uint8Array(t.buffer);return Ee(r),Re(r)}const ke=new Uint32Array(8),xe=new Uint32Array(64);function Ee(e){for(let t=0;t<e.length;t+=4){const s=e[t+0],r=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=r,e[t+3]=s}}const je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function Re(e){const t=e.length;let s,r="";for(s=2;s<t;s+=3)r+=je[e[s-2]>>2],r+=je[(3&e[s-2])<<4|e[s-1]>>4],r+=je[(15&e[s-1])<<2|e[s]>>6],r+=je[63&e[s]];return s===t+1&&(r+=je[e[s-2]>>2],r+=je[(3&e[s-2])<<4],r+="=="),s===t&&(r+=je[e[s-2]>>2],r+=je[(3&e[s-2])<<4|e[s-1]>>4],r+=je[(15&e[s-1])<<2],r+="="),r}const Se=new Uint8Array(16);const Oe=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),qe=/^(nonce|sha\d\d\d)-/;class Te{#e;#t;#s;#r;#n;#o;#a;#i;#c;#l;constructor(e,t,s){this.#e=e,this.#r=t;const r=this.#r;this.#n=[],this.#o=[],this.#a=[],this.#i=[],this.#c=[];const n=r["script-src"]||r["default-src"],o=r["script-src-elem"],a=r["style-src"]||r["default-src"],i=r["style-src-attr"],c=r["style-src-elem"];this.#t=!!n&&n.filter((e=>"unsafe-inline"!==e)).length>0||!!o&&o.filter((e=>"unsafe-inline"!==e)).length>0,this.#s=!!a&&a.filter((e=>"unsafe-inline"!==e)).length>0||!!i&&i.filter((e=>"unsafe-inline"!==e)).length>0||!!c&&c.filter((e=>"unsafe-inline"!==e)).length>0,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#s&&!this.#e,this.#l=s}add_script(e){if(this.#t){const t=this.#r;if(this.#e){const s=be(e);this.#n.push(`sha256-${s}`),t["script-src-elem"]?.length&&this.#o.push(`sha256-${s}`)}else 0===this.#n.length&&this.#n.push(`nonce-${this.#l}`),t["script-src-elem"]?.length&&this.#o.push(`nonce-${this.#l}`)}}add_style(e){if(this.#s){const t="9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=",s=this.#r;if(this.#e){const r=be(e);this.#a.push(`sha256-${r}`),s["style-src-attr"]?.length&&this.#i.push(`sha256-${r}`),s["style-src-elem"]?.length&&(r===t||s["style-src-elem"].includes(`sha256-${t}`)||this.#c.push(`sha256-${t}`),this.#c.push(`sha256-${r}`))}else 0!==this.#a.length||s["style-src"]?.includes("unsafe-inline")||this.#a.push(`nonce-${this.#l}`),s["style-src-attr"]?.length&&this.#i.push(`nonce-${this.#l}`),s["style-src-elem"]?.length&&(s["style-src-elem"].includes(`sha256-${t}`)||this.#c.push(`sha256-${t}`),this.#c.push(`nonce-${this.#l}`))}}get_header(e=!1){const t=[],s={...this.#r};this.#a.length>0&&(s["style-src"]=[...s["style-src"]||s["default-src"]||[],...this.#a]),this.#i.length>0&&(s["style-src-attr"]=[...s["style-src-attr"]||[],...this.#i]),this.#c.length>0&&(s["style-src-elem"]=[...s["style-src-elem"]||[],...this.#c]),this.#n.length>0&&(s["script-src"]=[...s["script-src"]||s["default-src"]||[],...this.#n]),this.#o.length>0&&(s["script-src-elem"]=[...s["script-src-elem"]||[],...this.#o]);for(const r in s){if(e&&("frame-ancestors"===r||"report-uri"===r||"sandbox"===r))continue;const n=s[r];if(!n)continue;const o=[r];Array.isArray(n)&&n.forEach((e=>{Oe.has(e)||qe.test(e)?o.push(`'${e}'`):o.push(e)})),t.push(o.join(" "))}return t.join("; ")}}class Ae extends Te{get_meta(){const e=this.get_header(!0);if(e)return`<meta http-equiv="content-security-policy" content=${ge(e)}>`}}class Pe extends Te{constructor(e,t,s){if(super(e,t,s),Object.values(t).filter((e=>!!e)).length>0){const e=t["report-to"]?.length??!1,s=t["report-uri"]?.length??!1;if(!e&&!s)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class Ue{nonce=function(){return crypto.getRandomValues(Se),Re(Se)}();csp_provider;report_only_provider;constructor({mode:e,directives:t,reportOnly:s},{prerender:r}){const n="hash"===e||"auto"===e&&r;this.csp_provider=new Ae(n,t,this.nonce),this.report_only_provider=new Pe(n,s,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(e){this.csp_provider.add_script(e),this.report_only_provider.add_script(e)}add_style(e){this.csp_provider.add_style(e),this.report_only_provider.add_style(e)}}function He(){let e,t;return{promise:new Promise(((s,r)=>{e=s,t=r})),fulfil:e,reject:t}}function Ce(){const e=[He()];return{iterator:{[Symbol.asyncIterator]:()=>({next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}})},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(He())},done:()=>{e[e.length-1].fulfil({done:!0})}}}const Ne={...S(!1),check:()=>!1},Le=new TextEncoder;async function We({branch:a,fetched:i,options:c,manifest:l,state:u,page_config:d,status:p,error:h=null,event:f,resolve_opts:m,action_result:y}){if(u.prerendering){if("nonce"===c.csp.mode)throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(c.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:g}=l._,w=new Set(g.imports),_=new Set(g.stylesheets),v=new Set(g.fonts),$=new Set,b=new Map;let k;const x="success"===y?.type||"failure"===y?.type?y.data??null:null;let E=e,S=t,O=ve(e);if(!u.prerendering?.fallback){E=f.url.pathname.slice(e.length).split("/").slice(2).map((()=>"..")).join("/")||".",O=`new URL(${ve(E)}, location).pathname.slice(0, -1)`,(!t||"/"===t[0]&&t!==A)&&(S=E)}if(d.ssr){const e={stores:{page:R(null),navigating:R(null),updated:Ne},constructors:await Promise.all(a.map((({node:e})=>e.component()))),form:x};let t={};for(let s=0;s<a.length;s+=1)t={...t,...a[s].data},e[`data_${s}`]=t;e.page={error:h,params:f.params,route:f.route,status:p,url:f.url,data:t,form:x,state:{}},s({base:E,assets:S});try{k=c.root.render(e)}finally{r()}for(const{node:s}of a){for(const e of s.imports)w.add(e);for(const e of s.stylesheets)_.add(e);for(const e of s.fonts)v.add(e);s.inline_styles&&Object.entries(await s.inline_styles()).forEach((([e,t])=>b.set(e,t)))}}else k={head:"",html:"",css:{code:"",map:null}};let q="",T=k.html;const P=new Ue(c.csp,{prerender:!!u.prerendering}),U=t=>t.startsWith("/")?e+t:`${S}/${t}`;if(b.size>0){const e=Array.from(b.values()).join("\n"),t=[];P.style_needs_nonce&&t.push(` nonce="${P.nonce}"`),P.add_style(e),q+=`\n\t<style${t.join("")}>${e}</style>`}for(const e of _){const t=U(e),s=['rel="stylesheet"'];if(b.has(e))s.push("disabled",'media="(max-width: 0)"');else if(m.preload({type:"css",path:t})){const e=['rel="preload"','as="style"'];$.add(`<${encodeURI(t)}>; ${e.join(";")}; nopush`)}q+=`\n\t\t<link href="${t}" ${s.join(" ")}>`}for(const e of v){const t=U(e);if(m.preload({type:"font",path:t})){q+=`\n\t\t<link ${['rel="preload"','as="font"',`type="font/${e.slice(e.lastIndexOf(".")+1)}"`,`href="${t}"`,"crossorigin"].join(" ")}>`}}const H=`__sveltekit_${c.version_hash}`,{data:C,chunks:N}=function(e,t,s,r){let n=1,o=0;const{iterator:a,push:i,done:c}=Ce();function l(s){if("function"==typeof s?.then){const a=n++;return o+=1,s.then((e=>({data:e}))).catch((async s=>({error:await Q(e,t,s)}))).then((async({data:s,error:n})=>{let u;o-=1;try{u=j.uneval({id:a,data:s,error:n},l)}catch{n=await Q(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),s=void 0,u=j.uneval({id:a,data:s,error:n},l)}i(`<script>${r}.resolve(${u})<\/script>\n`),0===o&&c()})),`${r}.defer(${a})`}}try{return{data:`[${s.map((e=>e?`{"type":"data","data":${j.uneval(e.data,l)},${Z(e)}${e.slash?`,"slash":${JSON.stringify(e.slash)}`:""}}`:"null")).join(",")}]`,chunks:o>0?a:null}}catch(u){throw new Error(Y(e,u))}}(f,c,a.map((e=>e.server_data)),H);if(d.ssr&&d.csr&&(T+=`\n\t\t\t${i.map((e=>function(e,t,s=!1){const r={};let n=null,o=null,a=!1;for(const[u,d]of e.response.headers)t(u,d)&&(r[u]=d),"cache-control"===u?n=d:"age"===u?o=d:"vary"===u&&"*"===d.trim()&&(a=!0);const i={status:e.response.status,statusText:e.response.statusText,headers:r,body:e.response_body},c=JSON.stringify(i).replace(_e,(e=>we[e])),l=['type="application/json"',"data-sveltekit-fetched",`data-url=${ge(e.url)}`];if(e.is_b64&&l.push("data-b64"),e.request_headers||e.request_body){const t=[];e.request_headers&&t.push([...new Headers(e.request_headers)].join(",")),e.request_body&&t.push(e.request_body),l.push(`data-hash="${fe(...t)}"`)}if(!s&&"GET"===e.method&&n&&!a){const e=/s-maxage=(\d+)/g.exec(n)??/max-age=(\d+)/g.exec(n);if(e){const t=+e[1]-+(o??"0");l.push(`data-ttl="${t}"`)}}return`<script ${l.join(" ")}>${c}<\/script>`}(e,m.filterSerializedResponseHeaders,!!u.prerendering))).join("\n\t\t\t")}`),d.csr){g.uses_env_dynamic_public&&u.prerendering&&w.add(`${c.app_dir}/env.js`);const e=Array.from(w,(e=>U(e))).filter((e=>m.preload({type:"js",path:e})));for(const t of e)$.add(`<${encodeURI(t)}>; rel="modulepreload"; nopush`),"modulepreload"!==c.preload_strategy?q+=`\n\t\t<link rel="preload" as="script" crossorigin="anonymous" href="${t}">`:u.prerendering&&(q+=`\n\t\t<link rel="modulepreload" href="${t}">`);const s=[],r=g.uses_env_dynamic_public&&u.prerendering,o=[`base: ${O}`];t&&o.push(`assets: ${ve(t)}`),g.uses_env_dynamic_public&&o.push(`env: ${r?"null":ve(n)}`),N&&(s.push("const deferred = new Map();"),o.push("defer: (id) => new Promise((fulfil, reject) => {\n\t\t\t\t\t\t\tdeferred.set(id, { fulfil, reject });\n\t\t\t\t\t\t})"),o.push("resolve: ({ id, data, error }) => {\n\t\t\t\t\t\t\tconst { fulfil, reject } = deferred.get(id);\n\t\t\t\t\t\t\tdeferred.delete(id);\n\n\t\t\t\t\t\t\tif (error) reject(error);\n\t\t\t\t\t\t\telse fulfil(data);\n\t\t\t\t\t\t}")),s.push(`${H} = {\n\t\t\t\t\t\t${o.join(",\n\t\t\t\t\t\t")}\n\t\t\t\t\t};`);const i=["app","element"];if(s.push("const element = document.currentScript.parentElement;"),d.ssr){const e={form:"null",error:"null"};s.push(`const data = ${C};`),x&&(e.form=function(e,t){return ie(e,j.uneval,t)}(x,f.route.id)),h&&(e.error=j.uneval(h));const t=[`node_ids: [${a.map((({node:e})=>e.index)).join(", ")}]`,"data",`form: ${e.form}`,`error: ${e.error}`];200!==p&&t.push(`status: ${p}`),c.embedded&&t.push(`params: ${j.uneval(f.params)}`,`route: ${ve(f.route)}`);const n="\t".repeat(r?7:6);i.push(`{\n${n}\t${t.join(`,\n${n}\t`)}\n${n}}`)}if(r?s.push(`import(${ve(`${E}/${c.app_dir}/env.js`)}).then(({ env }) => {\n\t\t\t\t\t\t${H}.env = env;\n\n\t\t\t\t\t\tPromise.all([\n\t\t\t\t\t\t\timport(${ve(U(g.start))}),\n\t\t\t\t\t\t\timport(${ve(U(g.app))})\n\t\t\t\t\t\t]).then(([kit, app]) => {\n\t\t\t\t\t\t\tkit.start(${i.join(", ")});\n\t\t\t\t\t\t});\n\t\t\t\t\t});`):s.push(`Promise.all([\n\t\t\t\t\t\timport(${ve(U(g.start))}),\n\t\t\t\t\t\timport(${ve(U(g.app))})\n\t\t\t\t\t]).then(([kit, app]) => {\n\t\t\t\t\t\tkit.start(${i.join(", ")});\n\t\t\t\t\t});`),c.service_worker){const e="";s.push(`if ('serviceWorker' in navigator) {\n\t\t\t\t\t\taddEventListener('load', function () {\n\t\t\t\t\t\t\tnavigator.serviceWorker.register('${U("service-worker.js")}'${e});\n\t\t\t\t\t\t});\n\t\t\t\t\t}`)}const l=`\n\t\t\t\t{\n\t\t\t\t\t${s.join("\n\n\t\t\t\t\t")}\n\t\t\t\t}\n\t\t\t`;P.add_script(l),T+=`\n\t\t\t<script${P.script_needs_nonce?` nonce="${P.nonce}"`:""}>${l}<\/script>\n\t\t`}const L=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(u.prerendering){const e=[],t=P.csp_provider.get_meta();t&&e.push(t),u.prerendering.cache&&e.push(`<meta http-equiv="cache-control" content="${u.prerendering.cache}">`),e.length>0&&(q=e.join("\n")+q)}else{const e=P.csp_provider.get_header();e&&L.set("content-security-policy",e);const t=P.report_only_provider.get_header();t&&L.set("content-security-policy-report-only",t),$.size&&L.set("link",Array.from($).join(", "))}q+=k.head;const W=c.templates.app({head:q,body:T,assets:S,nonce:P.nonce,env:o}),z=await m.transformPageChunk({html:W,done:!0})||"";return N||L.set("etag",`"${fe(z)}"`),N?new Response(new ReadableStream({async start(e){e.enqueue(Le.encode(z+"\n"));for await(const t of N)e.enqueue(Le.encode(t));e.close()},type:"bytes"}),{headers:{"content-type":"text/html"}}):J(z,{status:p,headers:L})}function ze(e,t){return e.reduce(((e,s)=>s?.universal?.[t]??s?.server?.[t]??e),void 0)}async function De({event:e,options:t,manifest:s,state:r,status:n,error:o,resolve_opts:a}){if(e.request.headers.get("x-sveltekit-error"))return B(t,n,o.message);const i=[];try{const c=[],l=await s._.nodes[0](),u=ze([l],"ssr")??!0,d=ze([l],"csr")??!0;if(u){r.error=!0;const t=ue({event:e,state:r,node:l,parent:async()=>({})}),n=await t,o=await de({event:e,fetched:i,node:l,parent:async()=>({}),resolve_opts:a,server_data_promise:t,state:r,csr:d});c.push({node:l,server_data:n,data:o},{node:await s._.nodes[1](),data:null,server_data:null})}return await We({options:t,manifest:s,state:r,page_config:{ssr:u,csr:d},status:n,error:await Q(e,t,o),branch:c,fetched:i,event:e,resolve_opts:a})}catch(c){return c instanceof L?X(c.status,c.location):B(t,G(c),(await Q(e,t,c)).message)}}const Ie=new TextEncoder;function Je(e,t=200){return J("string"==typeof e?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function Ge(e){return Je({type:"redirect",location:e.location})}function Fe(e,t,s){let r=1,n=0;const{iterator:o,push:a,done:i}=Ce(),c={Promise:s=>{if("function"==typeof s?.then){const o=r++;n+=1;let l="data";return s.catch((async s=>(l="error",Q(e,t,s)))).then((async s=>{let r;try{r=j.stringify(s,c)}catch{const s=await Q(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));l="error",r=j.stringify(s,c)}n-=1,a(`{"type":"chunk","id":${o},"${l}":${r}}\n`),0===n&&i()})),o}}};try{return{data:`{"type":"data","nodes":[${s.map((e=>e?"error"===e.type||"skip"===e.type?JSON.stringify(e):`{"type":"data","data":${j.stringify(e.data,c)},${Z(e)}${e.slash?`,"slash":${JSON.stringify(e.slash)}`:""}}`:"null")).join(",")}]}\n`,chunks:n>0?o:null}}catch(l){throw new Error(Y(e,l))}}function Me(e,t){return Promise.all([...e.layouts.map((e=>null==e?e:t._.nodes[e]())),t._.nodes[e.leaf]()])}const Be=10;async function Ve(e,t,s,r,n,o){if(n.depth>Be)return J(`Not found: ${e.url.pathname}`,{status:404});if(ee(e)){const n=await r._.nodes[t.leaf]();return async function(e,t,s){const r=s?.actions;if(!r){const s=new W(405,"Method Not Allowed","POST method not allowed. No actions exist for this page");return re({type:"error",error:await Q(e,t,s)},{status:s.status,headers:{allow:"GET"}})}ne(r);try{const t=await oe(e,r);return re(t instanceof z?{type:"failure",status:t.status,data:ae(t.data,e.route.id)}:{type:"success",status:t?200:204,data:ae(t,e.route.id)})}catch(n){const s=n;return s instanceof L?se(s):re({type:"error",error:await Q(e,t,te(s))},{status:G(s)})}}(e,s,n?.server)}try{const i=await Me(t,r),c=i.at(-1);let l,u=200;if(function(e){return"POST"===e.request.method}(e)){if(l=await async function(e,t){const s=t?.actions;if(!s)return e.setHeaders({allow:"GET"}),{type:"error",error:new W(405,"Method Not Allowed","POST method not allowed. No actions exist for this page")};ne(s);try{const t=await oe(e,s);return t instanceof z?{type:"failure",status:t.status,data:t.data}:{type:"success",status:200,data:t}}catch(r){const e=r;return e instanceof L?{type:"redirect",status:e.status,location:e.location}:{type:"error",error:te(e)}}}(e,c.server),"redirect"===l?.type)return X(l.status,l.location);"error"===l?.type&&(u=G(l.error)),"failure"===l?.type&&(u=l.status)}const d=i.some((e=>e?.server?.load)),p=m(e.url.pathname),h=ze(i,"prerender")??!1;if(h){const e=c.server;if(e?.actions)throw new Error("Cannot prerender pages with actions")}else if(n.prerendering)return new Response(void 0,{status:204});n.prerender_default=h;const f=[];if(!(!1!==ze(i,"ssr")||n.prerendering&&d))return await We({branch:[],fetched:f,page_config:{ssr:!1,csr:ze(i,"csr")??!0},status:u,error:null,event:e,options:s,manifest:r,state:n,resolve_opts:o});const y=[];let g=null;const w=i.map(((t,s)=>{if(g)throw g;return Promise.resolve().then((async()=>{try{if(t===c&&"error"===l?.type)throw l.error;return await ue({event:e,state:n,node:t,parent:async()=>{const e={};for(let t=0;t<s;t+=1){const s=await w[t];s&&Object.assign(e,s.data)}return e}})}catch(r){throw g=r,g}}))})),_=ze(i,"csr")??!0,v=i.map(((t,s)=>{if(g)throw g;return Promise.resolve().then((async()=>{try{return await de({event:e,fetched:f,node:t,parent:async()=>{const e={};for(let t=0;t<s;t+=1)Object.assign(e,await v[t]);return e},resolve_opts:o,server_data_promise:w[s],state:n,csr:_})}catch(r){throw g=r,g}}))}));for(const e of w)e.catch((()=>{}));for(const e of v)e.catch((()=>{}));for(let m=0;m<i.length;m+=1){const c=i[m];if(c)try{const e=await w[m],t=await v[m];y.push({node:c,server_data:e,data:t})}catch(a){const i=a;if(i instanceof L){if(n.prerendering&&d){const e=JSON.stringify({type:"redirect",location:i.location});n.prerendering.dependencies.set(p,{response:J(e),body:e})}return X(i.status,i.location)}const c=G(i),l=await Q(e,s,i);for(;m--;)if(t.errors[m]){const a=t.errors[m],i=await r._.nodes[a]();let u=m;for(;!y[u];)u-=1;return await We({event:e,options:s,manifest:r,state:n,resolve_opts:o,page_config:{ssr:!0,csr:!0},status:c,error:l,branch:K(y.slice(0,u+1)).concat({node:i,data:null,server_data:null}),fetched:f})}return B(s,c,l.message)}else y.push(null)}if(n.prerendering&&d){let{data:t,chunks:r}=Fe(e,s,y.map((e=>e?.server_data)));if(r)for await(const e of r)t+=e;n.prerendering.dependencies.set(p,{response:J(t),body:t})}const $=ze(i,"ssr")??!0;return await We({event:e,options:s,manifest:r,state:n,resolve_opts:o,page_config:{csr:ze(i,"csr")??!0,ssr:$},status:u,error:null,branch:!1===$?[]:K(y),action_result:l,fetched:f})}catch(a){return await De({event:e,options:s,manifest:r,state:n,status:500,error:a,resolve_opts:o})}}function Qe(e,t,s){const r={},n=e.slice(1),o=n.filter((e=>void 0!==e));let a=0;for(let i=0;i<t.length;i+=1){const e=t[i];let c=n[i-a];if(e.chained&&e.rest&&a&&(c=n.slice(i-a,i+1).filter((e=>e)).join("/"),a=0),void 0!==c)if(e.matcher&&!s[e.matcher](c)){if(!e.optional||!e.chained)return;a++}else{r[e.name]=c;const s=t[i+1],l=n[i+1];s&&!s.rest&&s.optional&&l&&e.chained&&(a=0),s||l||Object.keys(r).length!==o.length||(a=0)}else e.rest&&(r[e.name]="")}if(!a)return r}function Xe(e){if(void 0===e?.path)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function Ye(e,t){if(!t)return!0;const s="."===t[0]?t.slice(1):t;return e===s||e.endsWith("."+s)}function Ze(e,t){if(!t)return!0;const s=t.endsWith("/")?t.slice(0,-1):t;return e===s||e.startsWith(s+"/")}function Ke(e,t){for(const s of t){const{name:t,value:r,options:n}=s;if(e.append("set-cookie",q(t,r,n)),n.path.endsWith(".html")){const s=m(n.path);e.append("set-cookie",q(t,r,{...n,path:s}))}}}function et({event:s,options:r,manifest:n,state:o,get_cookie_header:a,set_internal:i}){return(c,l)=>{const u=(async(c,l)=>{const u=tt(c,l,s.url);let d=(c instanceof Request?c.mode:l?.mode)??"cors",p=(c instanceof Request?c.credentials:l?.credentials)??"same-origin";return r.hooks.handleFetch({event:s,request:u,fetch:async(c,l)=>{const h=tt(c,l,s.url),f=new URL(h.url);if(h.headers.has("origin")||h.headers.set("origin",s.url.origin),c!==u&&(d=(c instanceof Request?c.mode:l?.mode)??"cors",p=(c instanceof Request?c.credentials:l?.credentials)??"same-origin"),"GET"!==h.method&&"HEAD"!==h.method||("no-cors"!==d||f.origin===s.url.origin)&&f.origin!==s.url.origin||h.headers.delete("origin"),f.origin!==s.url.origin){if(`.${f.hostname}`.endsWith(`.${s.url.hostname}`)&&"omit"!==p){const e=a(f,h.headers.get("cookie"));e&&h.headers.set("cookie",e)}return fetch(h)}const m=t||e,y=decodeURIComponent(f.pathname),g=(y.startsWith(m)?y.slice(m.length):y).slice(1),w=`${g}/index.html`,_=n.assets.has(g),v=n.assets.has(w);if(_||v){const e=_?g:w;if(o.read){const t=_?n.mimeTypes[g.slice(g.lastIndexOf("."))]:"text/html";return new Response(o.read(e),{headers:t?{"content-type":t}:{}})}return await fetch(h)}if("omit"!==p){const e=a(f,h.headers.get("cookie"));e&&h.headers.set("cookie",e);const t=s.request.headers.get("authorization");t&&!h.headers.has("authorization")&&h.headers.set("authorization",t)}h.headers.has("accept")||h.headers.set("accept","*/*"),h.headers.has("accept-language")||h.headers.set("accept-language",s.request.headers.get("accept-language"));const $=await ut(h,r,n,{...o,depth:o.depth+1}),b=$.headers.get("set-cookie");if(b)for(const e of T.splitCookiesString(b)){const{name:t,value:s,...r}=T.parseString(e,{decodeValues:!1}),n=r.path??(f.pathname.split("/").slice(0,-1).join("/")||"/");i(t,s,{path:n,encode:e=>e,...r})}return $}})})(c,l);return u.catch((()=>{})),u}}function tt(e,t,s){return e instanceof Request?e:new Request("string"==typeof e?new URL(e,s):e,t)}let st,rt,nt;const ot=({html:e})=>e,at=()=>!1,it=({type:e})=>"js"===e||"css"===e,ct=new Set(["GET","HEAD","POST"]),lt=new Set(["GET","HEAD","OPTIONS"]);async function ut(t,s,r,o){const a=new URL(t.url);if(s.csrf_check_origin){if(C(t)&&("POST"===t.method||"PUT"===t.method||"PATCH"===t.method||"DELETE"===t.method)&&t.headers.get("origin")!==a.origin){const e=new N(403,`Cross-site ${t.method} form submissions are forbidden`);return"application/json"===t.headers.get("accept")?D(e.body,{status:e.status}):J(e.body.message,{status:e.status})}}let i,c;try{i=s.hooks.reroute({url:new URL(a)})??a.pathname}catch{return J("Internal Server Error",{status:500})}try{c=g(i)}catch{return J("Malformed URI",{status:400})}let l=null,u={};if(e&&!o.prerendering?.fallback){if(!c.startsWith(e))return J("Not found",{status:404});c=c.slice(e.length)||"/"}if(c===`/${s.app_dir}/env.js`)return function(e){return st??=`export const env=${JSON.stringify(n)}`,rt??=`W/${Date.now()}`,nt??=new Headers({"content-type":"application/javascript; charset=utf-8",etag:rt}),e.headers.get("if-none-match")===rt?new Response(void 0,{status:304,headers:nt}):new Response(st,{headers:nt})}(t);if(c.startsWith(`/${s.app_dir}`))return J("Not found",{status:404});const d=w(c);let p,m;if(d&&(c=_(c)||"/",a.pathname=_(a.pathname)+("1"===a.searchParams.get(le)?"/":"")||"/",a.searchParams.delete(le),p=a.searchParams.get(ce)?.split("").map((e=>"1"===e)),a.searchParams.delete(ce)),!o.prerendering?.fallback){const e=await r._.matchers();for(const t of r._.routes){const s=t.pattern.exec(c);if(!s)continue;const r=Qe(s,t.params,e);if(r){l=t,u=v(r);break}}}const $={};let b={};const k={cookies:null,fetch:null,getClientAddress:o.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-netlify does not specify getClientAddress. Please raise an issue")}),locals:{},params:u,platform:o.platform,request:t,route:{id:l?.id??null},setHeaders:e=>{for(const t in e){const s=t.toLowerCase(),r=e[t];if("set-cookie"===s)throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(s in $)throw new Error(`"${t}" header is already set`);$[s]=r,o.prerendering&&"cache-control"===s&&(o.prerendering.cache=r)}},url:a,isDataRequest:d,isSubRequest:o.depth>0};let x={transformPageChunk:ot,filterSerializedResponseHeaders:at,preload:it};try{if(l){if(a.pathname===e||a.pathname===e+"/")m="always";else if(l.page){const e=await Me(l.page,r);m=ze(e,"trailingSlash")}else if(l.endpoint){const e=await l.endpoint();m=e.trailingSlash}if(!d){const e=f(a.pathname,m??"never");if(e!==a.pathname&&!o.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(e.startsWith("//")?a.origin+e:e)+("?"===a.search?"":a.search)}})}if(o.before_handle||o.emulator?.platform){let e={},t=!1;if(l.endpoint){const s=await l.endpoint();e=s.config??e,t=s.prerender??t}else if(l.page){const s=await Me(l.page,r);e=function(e){let t={};for(const s of e)(s?.universal?.config||s?.server?.config)&&(t={...t,...s?.universal?.config,...s?.server?.config});return Object.keys(t).length?t:void 0}(s)??e,t=ze(s,"prerender")??!1}o.before_handle&&o.before_handle(k,e,t),o.emulator?.platform&&(k.platform=await o.emulator.platform({config:e,prerender:t}))}}const{cookies:n,new_cookies:i,get_cookie_header:c,set_internal:u}=function(e,t,s){const r=e.headers.get("cookie")??"",n=O(r,{decode:e=>e}),o=f(t.pathname,s),a={},i={httpOnly:!0,sameSite:"lax",secure:"localhost"!==t.hostname||"http:"!==t.protocol},c={get(e,s){const n=a[e];if(n&&Ye(t.hostname,n.options.domain)&&Ze(t.pathname,n.options.path))return n.value;const o=s?.decode||decodeURIComponent;return O(r,{decode:o})[e]},getAll(e){const s=e?.decode||decodeURIComponent,n=O(r,{decode:s});for(const r of Object.values(a))Ye(t.hostname,r.options.domain)&&Ze(t.pathname,r.options.path)&&(n[r.name]=r.value);return Object.entries(n).map((([e,t])=>({name:e,value:t})))},set(e,t,s){Xe(s),l(e,t,{...i,...s})},delete(e,t){Xe(t),c.set(e,"",{...t,maxAge:0})},serialize(e,s,r){Xe(r);let n=r.path;return r.domain&&r.domain!==t.hostname||(n=y(o,n)),q(e,s,{...i,...r,path:n})}};function l(e,s,r){let n=r.path;r.domain&&r.domain!==t.hostname||(n=y(o,n)),a[e]={name:e,value:s,options:{...r,path:n}}}return{cookies:c,new_cookies:a,get_cookie_header:function(e,t){const s={...n};for(const r in a){const t=a[r];if(!Ye(e.hostname,t.options.domain))continue;if(!Ze(e.pathname,t.options.path))continue;const n=t.options.encode||encodeURIComponent;s[t.name]=n(t.value)}if(t){const e=O(t,{decode:e=>e});for(const t in e)s[t]=e[t]}return Object.entries(s).map((([e,t])=>`${e}=${t}`)).join("; ")},set_internal:l}}(t,a,m??"never");b=i,k.cookies=n,k.fetch=et({event:k,options:s,manifest:r,state:o,get_cookie_header:c,set_internal:u}),o.prerendering&&!o.prerendering.fallback&&h(a);const g=await s.hooks.handle({event:k,resolve:(e,n)=>async function(e,n){try{if(n&&(x={transformPageChunk:n.transformPageChunk||ot,filterSerializedResponseHeaders:n.filterSerializedResponseHeaders||at,preload:n.preload||it}),o.prerendering?.fallback)return await We({event:e,options:s,manifest:r,state:o,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:x});if(l){const n=e.request.method;let a;if(d)a=await async function(e,t,s,r,n,o,a){if(!t.page)return new Response(void 0,{status:404});try{const i=[...t.page.layouts,t.page.leaf],c=o??i.map((()=>!0));let l=!1;const u=new URL(e.url);u.pathname=f(u.pathname,a);const d={...e,url:u},p=i.map(((e,t)=>function(e){let t,s=!1;return()=>s?t:(s=!0,t=e())}((async()=>{try{if(l)return{type:"skip"};const s=null==e?e:await r._.nodes[e]();return ue({event:d,state:n,node:s,parent:async()=>{const e={};for(let s=0;s<t;s+=1){const t=await p[s]();t&&Object.assign(e,t.data)}return e}})}catch(s){throw l=!0,s}})))),h=p.map((async(e,t)=>c[t]?e():{type:"skip"}));let m=h.length;const y=await Promise.all(h.map(((t,r)=>t.catch((async t=>{if(t instanceof L)throw t;return m=Math.min(m,r+1),{type:"error",error:await Q(e,s,t),status:t instanceof N||t instanceof W?t.status:void 0}}))))),{data:g,chunks:w}=Fe(e,s,y);return w?new Response(new ReadableStream({async start(e){e.enqueue(Ie.encode(g));for await(const t of w)e.enqueue(Ie.encode(t));e.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):Je(g)}catch(i){const t=i;return t instanceof L?Ge(t):Je(await Q(e,s,t),500)}}(e,l,s,r,o,p,m??"never");else if(!l.endpoint||l.page&&!function(e){const{method:t,headers:s}=e.request;return!(!P.includes(t)||U.includes(t))||("POST"!==t||"true"!==s.get("x-sveltekit-action"))&&"text/html"!==H(e.request.headers.get("accept")??"*/*",["*","text/html"])}(e)){if(!l.page)throw new Error("This should never happen");if(ct.has(n))a=await Ve(e,l.page,s,r,o,x);else{const e=new Set(lt),t=await r._.nodes[l.page.leaf]();if(t?.server?.actions&&e.add("POST"),"OPTIONS"===n)a=new Response(null,{status:204,headers:{allow:Array.from(e.values()).join(", ")}});else{a=F([...e].reduce(((e,t)=>(e[t]=!0,e)),{}),n)}}}else a=await async function(e,t,s){const r=e.request.method;let n=t[r]||t.fallback;if("HEAD"===r&&t.GET&&!t.HEAD&&(n=t.GET),!n)return F(t,r);const o=t.prerender??s.prerender_default;if(o&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(s.prerendering&&!o){if(s.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{let t=await n(e);if(!(t instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);return s.prerendering&&(t=new Response(t.body,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)}),t.headers.set("x-sveltekit-prerender",String(o))),t}catch(a){if(a instanceof L)return new Response(void 0,{status:a.status,headers:{location:a.location}});throw a}}(e,await l.endpoint(),o);if("GET"===t.method&&l.page&&l.endpoint){const e=a.headers.get("vary")?.split(",")?.map((e=>e.trim().toLowerCase()));e?.includes("accept")||e?.includes("*")||(a=new Response(a.body,{status:a.status,statusText:a.statusText,headers:new Headers(a.headers)}),a.headers.append("Vary","Accept"))}return a}return o.error&&e.isSubRequest?await fetch(t,{headers:{"x-sveltekit-error":"true"}}):o.error?J("Internal Server Error",{status:500}):0===o.depth?await De({event:e,options:s,manifest:r,state:o,status:404,error:new W(404,"Not Found",`Not found: ${e.url.pathname}`),resolve_opts:x}):o.prerendering?J("not found",{status:404}):await fetch(t)}catch(a){return await V(e,s,a)}finally{e.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},e.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}(e,n).then((t=>{for(const e in $){const s=$[e];t.headers.set(e,s)}return Ke(t.headers,Object.values(b)),o.prerendering&&null!==e.route.id&&t.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),t}))});if(200===g.status&&g.headers.has("etag")){let e=t.headers.get("if-none-match");e?.startsWith('W/"')&&(e=e.substring(2));const s=g.headers.get("etag");if(e===s){const e=new Headers({etag:s});for(const t of["cache-control","content-location","date","expires","vary","set-cookie"]){const s=g.headers.get(t);s&&e.set(t,s)}return new Response(void 0,{status:304,headers:e})}}if(d&&g.status>=300&&g.status<=308){const e=g.headers.get("location");if(e)return Ge(new L(g.status,e))}return g}catch(E){if(E instanceof L){const e=d?Ge(E):l?.page&&ee(k)?se(E):X(E.status,E.location);return Ke(e.headers,Object.values(b)),e}return await V(k,s,E)}}const dt={get({type:e},t){throw new Error(`Cannot read values from $env/dynamic/${e} while prerendering (attempted to read env.${t.toString()}). Use $env/static/${e} instead`)}};class pt{#u;#d;constructor(e){this.#u=a,this.#d=e}async init({env:e,read:t}){const s={public_prefix:this.#u.env_public_prefix,private_prefix:this.#u.env_private_prefix},r=function(e,{public_prefix:t,private_prefix:s}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(s)&&(""===t||!e.startsWith(t)))))}(e,s),n=function(e,{public_prefix:t,private_prefix:s}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(t)&&(""===s||!e.startsWith(s)))))}(e,s);if(i(c?new Proxy({type:"private"},dt):r),l(c?new Proxy({type:"public"},dt):n),d(n),!this.#u.hooks)try{const e=await u();this.#u.hooks={handle:e.handle||(({event:e,resolve:t})=>t(e)),handleError:e.handleError||(({error:e})=>console.error(e)),handleFetch:e.handleFetch||(({request:e,fetch:t})=>t(e)),reroute:e.reroute||(()=>{})}}catch(o){throw o}}async respond(e,t){return ut(e,this.#u,this.#d,{...t,error:!1,depth:0})}}export{pt as Server};
//# sourceMappingURL=index.js.map
